Copied from uniswap-v2-core